<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ุฅุนุฏุงุฏุงุช ุงููุธุงู</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>โ๏ธ ุฅุนุฏุงุฏุงุช ุงููุธุงู</h1>

  <!-- ูููู ุงุฎุชูุงุฑ ุงููุฑุน + ุจูุงูุงุช ุงููุณุชุฎุฏู -->
  <div id="component"></div>

  <section class="panel">
    <h2>๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h2>
    <button id="manageUsersBtn" class="btn primary">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</button>
  </section>

  <section class="panel">
    <h2>๐ก๏ธ ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช</h2>
    <button id="manageRolesBtn" class="btn primary">ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ</button>
  </section>

  <section class="panel">
    <h2>๐ข ุฅุฏุงุฑุฉ ุงููุฑูุน</h2>
    <button id="manageBranchesBtn" class="btn primary">ุฅุฏุงุฑุฉ ุงููุฑูุน</button>
  </section>

  <section class="panel">
    <h2>๐ ุงููุบุฉ</h2>
    <select id="languageSelect">
      <option value="ar">ุงูุนุฑุจูุฉ</option>
      <option value="en">English</option>
    </select>
  </section>

  <section class="panel">
    <h2>๐ ุงูุชูุจููุงุช</h2>
    <label><input type="checkbox" id="notifyContracts" checked> ุชูุจููุงุช ุงูุนููุฏ</label><br>
    <label><input type="checkbox" id="notifyPayments" checked> ุชูุจููุงุช ุงูุฏูุนุงุช</label><br>
    <label><input type="checkbox" id="notifyMaintenance"> ุชูุจููุงุช ุงูุตูุงูุฉ</label>
  </section>

  <section class="panel">
    <h2>๐ณ ุงูููุชุฑุฉ ุงูุฅููุชุฑูููุฉ (ZATCA)</h2>
    <label>API Key:</label>
    <input type="text" id="zatcaKey" placeholder="ุฃุฏุฎู ููุชุงุญ ุงูุฑุจุท"><br><br>
    <button id="saveZatcaBtn" class="btn primary">๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
  </section>

  <script type="module">
    import { initComponent } from './scripts/component.js';
    import { getSession } from './scripts/auth.js';
    import { guardButton } from './scripts/permissions.js';

    // ุชูุนูู ุงููููู ุงูููุญุฏ
    initComponent("component", []);

    const session = getSession();

    // ุชุทุจูู ุงูุตูุงุญูุงุช ุนูู ุงูุฃุฒุฑุงุฑ
    guardButton(document.getElementById("manageUsersBtn"), session.role, "ุฅุนุฏุงุฏุงุช", "ูุณุชุฎุฏููู");
    guardButton(document.getElementById("manageRolesBtn"), session.role, "ุฅุนุฏุงุฏุงุช", "ุฃุฏูุงุฑ");
    guardButton(document.getElementById("manageBranchesBtn"), session.role, "ุฅุนุฏุงุฏุงุช", "ูุฑูุน");
    guardButton(document.getElementById("saveZatcaBtn"), session.role, "ุฅุนุฏุงุฏุงุช", "ููุชุฑุฉ");

    // ุชุบููุฑ ุงููุบุฉ (ูุญุงูุงุฉ)
    document.getElementById("languageSelect").addEventListener("change", e => {
      alert("โ ุชู ุชุบููุฑ ุงููุบุฉ ุฅูู: " + e.target.value);
    });

    // ุญูุธ ุฅุนุฏุงุฏุงุช ZATCA (ูุญุงูุงุฉ)
    document.getElementById("saveZatcaBtn").addEventListener("click", () => {
      const key = document.getElementById("zatcaKey").value;
      if (key) {
        alert("โ ุชู ุญูุธ ููุชุงุญ ZATCA ุจูุฌุงุญ!");
      } else {
        alert("โ๏ธ ุงูุฑุฌุงุก ุฅุฏุฎุงู ููุชุงุญ ZATCA.");
      }
    });
  </script>
</body>
</html>
